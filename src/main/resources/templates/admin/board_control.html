<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
<title>게시글 관리</title>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
 

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" th:href="@{https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css}" rel="stylesheet">

    <link rel="stylesheet" href="../../static/css/board_control.css" th:href="@{/css/board_control.css}">

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
    <link rel="stylesheet" href="../../static/css/common.css" th:href="@{/css/common.css}">


</head>


<body class="d-flex flex-column min-vh-100">
    <!--헤더-->
    <header>
        <nav class="navbar navbar-expand-lg navbar-dark bg-black" aria-label="Offcanvas navbar large">
            <div class="container-fluid">
                <div class="col-3">
                    <a href="" class="d-flex" th:href="@{/}">
                        <img src="/static/img/concert_logo.png" th:src="@{/img/concert_logo.png}" class="img-fluid header-img-logo" alt="콘서트_이미지_로고">
                    </a>
                </div>
                <button class="navbar-toggler bg-black" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasNavbar" aria-controls="offcanvasNavbar" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="offcanvas offcanvas-end offcanvas-size-sm bg-black col-6" tabindex="-1" id="offcanvasNavbar" aria-labelledby="offcanvasNavbarLabel">
                    <div class="offcanvas-header">
                        <h6 class="offcanvas-title text-white" id="offcanvasNavbarLabel">로그인이 필요합니다.</h6>
                        <div class="col-3 navbar justify-content-center user-nav">
                            <div class="d-flex">
                                <a href="/ticket" th:href="@{/ticket}"class="nav-link text-decoration-none text-white fw-semibold">
                                    <i class="bi bi-ticket-detailed custom-atag fs-4"></i>
                                </a>
                                <a href="/accounts/login.html" th:href="@{/acounts/login.html}"class="nav-link text-decoration-none text-white fw-semibold mx-2">
                                    <i class="bi bi-person custom-atag fs-4"></i>
                                </a>
                                <!-- <a href="#" class="nav-link text-decoration-none text-white fw-semibold custom-atag">회원가입</a> -->
                            </div>
                        </div>
                        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="offcanvas" aria-label="Close"></button>
                    </div>
                    <div class="offcanvas-body">
                        <ul class="navbar-nav justify-content-center flex-grow-1 pe-3 fs-5">
                            <li class="nav-item">
                                <a href="/admin" th:href="@{/admin}" class="nav-link text-warning px-3" hidden>ADMIN</a>
                            </li>
                            <li class="nav-item">
                                <a href="/about.html" th:href="@{/about.html}" class="nav-link custom-atag px-3">ABOUT</a>
                            </li>
                            <li class="nav-item">
                                <a href="/ticket" th:href="@{/ticket}" class="nav-link custom-atag px-3">TICKET</a>
                                <ul class="sub-menu">
                                    <li><a href="">구매내역</a></li>
                                    <li><a href="">예매정보</a></li>
                                    <li><a href=""></a></li>
                                </ul>
                            </li>
                            <li class="nav-item">
                                <a href="/notice" th:href="@{/notice}" class="nav-link custom-atag px-3">NOTICE</a>
                                <ul class="sub-menu">
                                    <li><a href="">티켓소식</a></li>
                                    <li><a href="">시스템관련</a></li>
                                    <li><a href="">배송관련</a></li>
                                    <li><a href="">기타</a></li>
                                </ul>
                            </li>
                            <li class="nav-item">
                                <a href="/qna" th:href="@{/qna}"class="nav-link custom-atag px-3">Q N A</a>
                                <ul class="sub-menu pe-2">
                                    <li><a href="">예매/취소</a></li>
                                    <li><a href="">결제</a></li>
                                    <li><a href="">기타</a></li>
                                </ul>
                            </li>
                            <li class="nav-item">
                                <a href="/event" th:href="@{/event}"class="nav-link custom-atag px-3">EVENT</a>
                                <ul class="sub-menu">
                                    <li><a href="">이벤트</a></li>
                                    <li><a href="">당첨자발표</a></li>
                                    <li><a href="">자유</a></li>
                                    <li><a href="">후기/리뷰</a></li>
                                </ul>
                            </li>
                        </ul>
                        <div class="col-3 navbar-nav justify-content-end user-nav pe-3">
                            <a href="/ticket" th:href="@{/ticket}" class="nav-link custom-atag">티켓예매</a>
                            <a href="/accounts/login.html" th:href="@{/accounts/login.html}" class="nav-link custom-atag ">로그인</a>
                        </div>
                        <div class="col-1 d-flex align-items-center justify-content-end fs-2 pe-4 footer-icon user-nav">
                            <a href="https://github.com/teamJoongang/Hot-And-Funny" th:href="@{https://github.com/teamJoongang/Hot-And-Funny}" class="text-secondary pe-3"><i class="bi bi-github"></i></a>
                            <a href="https://hyunsense.notion.site/hyunsense/fd8584dc0730455aa340d328dba8beb6" th:href="@{https://hyunsense.notion.site/hyunsense/fd8584dc0730455aa340d328dba8beb6}" class=""><img class="notion" src="/static/img/notion_icon2.png" th:src="@{/img/notion_icon2.png}" alt=""></a>
                        </div>
                    </div>
              </div>
            </div>
          </nav>
    </header>
    <!--헤더 끝-->

    
    <div class="row gx-0">
        <div class="col-2 me-3 text-center fw-bold border rounded-1">
            <div class="left-nav">
                <h4 class="mt-5">관리자 목록</h4>
                <nav class="mt-5">
                    <div class="mx-auto">
                        <a href="../admin/dashboard.html" th:href="@{/admin/dashborad.html}" class="nav-link py-2">대시보드</a>
                    </div>
                    <div class="mt-3 mx-auto">
                        <a href="../admin/statistics.html" th:href="@{/admin/statistics}" class="nav-link py-2">통계자료</a>
                    </div>
                    <div class="mt-3 mx-auto">
                        <a href="../admin/refund.html" th:href="@{/admin/refund}" class="nav-link py-2">환불관리</a>
                    </div>
                    <div class="mt-3 mx-auto">
                        <a href="../admin/board_control.html" th:href="@{/admin/boardcontrol}" class="nav-link py-2 fs-5">게시글 관리</a> 
                    </div>
                    <div class="mt-3 mx-auto">
                        <a href="../admin/user_info.html" th:href="@{/admin/userinfo}" class="nav-link py-2">회원정보 조회</a>
                    </div>
                </nav>
            </div>
        </div>


	<div class="col-9 mt-5">
		<h1 class="mt-4 text-center">전체 게시판 관리</h1>
 
		<div class="card mb-4 overflow-y-scroll w-75 mx-auto" style="border: 1px solid #ccc">

			<div class="card-body">
                <form action="" method="get">
                    <table class="table">
                        
                        
                        <colgroup>
                            <col width="10%"/> <!--번호-->
                            <col width="40%"/> <!--제목-->
                            <col width="20%"/> <!--작성자-->
                            <col width="15%"/> <!--글 카테고리-->
                            <col width="10%"/> <!--작성일-->
                            <col width="5%"/> <!--체크박스-->
                        </colgroup>
                        <thead>
                            <tr>
                                <th scope="col">글 번호</th>
                                <th scope="col">제목</th>
                                <th scope="col">작성자</th>
                                <th scope="col">카테고리</th>
                                <th scope="col">작성일</th>

                                <input type = button class="btn btn-primary text-black bg-white float-end" value="수정" style="border: 1px solid #444444d8;"></input>

                                <input type = button class="btn btn-primary text-black bg-white float-end" value="삭제" style="border: 1px solid #444444d8;"></input>
                            </tr>
                        </thead>

                        <tbody>
                            <tr>
                                <td>1</td>
                                <td><a href="상세보기" th:href="@{상세보기}">제목1</a></td>
                                <td>test1</td>
                                <td>공지사항</td>
                                <td>09.01</td>
                                <td><input type="checkbox"></td>
                            </tr>
                                                        <tr>
                                <td>1</td>
                                <td><a href="상세보기" th:href="@{상세보기}">제목1</a></td>
                                <td>test1</td>
                                <td>공지사항</td>
                                <td>09.01</td>
                                <td><input type="checkbox"></td>
                            </tr>
                                                        <tr>
                                <td>1</td>
                                <td><a href="상세보기" th:href="@{상세보기}">제목1</a></td>
                                <td>test1</td>
                                <td>공지사항</td>
                                <td>09.01</td>
                                <td><input type="checkbox"></td>
                            </tr>
                                                        <tr>
                                <td>1</td>
                                <td><a href="상세보기" th:href="@{상세보기}">제목1</a></td>
                                <td>test1</td>
                                <td>공지사항</td>
                                <td>09.01</td>
                                <td><input type="checkbox"></td>
                            </tr>
                                                        <tr>
                                <td>1</td>
                                <td><a href="상세보기" th:href="@{상세보기}">제목1</a></td>
                                <td>test1</td>
                                <td>공지사항</td>
                                <td>09.01</td>
                                <td><input type="checkbox"></td>
                            </tr>
                                                        <tr>
                                <td>1</td>
                                <td><a href="상세보기" th:href="@{상세보기}">제목1</a></td>
                                <td>test1</td>
                                <td>공지사항</td>
                                <td>09.01</td>
                                <td><input type="checkbox"></td>
                            </tr>
                                                        <tr>
                                <td>1</td>
                                <td><a href="상세보기" th:href="@{상세보기}">제목1</a></td>
                                <td>test1</td>
                                <td>공지사항</td>
                                <td>09.01</td>
                                <td><input type="checkbox"></td>
                            </tr>
                                                        <tr>
                                <td>1</td>
                                <td><a href="상세보기" th:href="@{상세보기}">제목1</a></td>
                                <td>test1</td>
                                <td>공지사항</td>
                                <td>09.01</td>
                                <td><input type="checkbox"></td>
                            </tr>
                                                        <tr>
                                <td>1</td>
                                <td><a href="상세보기" th:href="@{상세보기}">제목1</a></td>
                                <td>test1</td>
                                <td>공지사항</td>
                                <td>09.01</td>
                                <td><input type="checkbox"></td>
                            </tr>
                                                        <tr>
                                <td>1</td>
                                <td><a href="상세보기" th:href="@{상세보기}">제목1</a></td>
                                <td>test1</td>
                                <td>공지사항</td>
                                <td>09.01</td>
                                <td><input type="checkbox"></td>
                            </tr>
                            <tr>
                                <td>1</td>
                                <td><a href="상세보기" th:href="@{상세보기}">제목1</a></td>
                                <td>test1</td>
                                <td>공지사항</td>
                                <td>09.01</td>
                                <td><input type="checkbox"></td>
                            </tr>
                            
                            
                        </tbody>
                    </table>
                </form>
			</div>
		</div>


        <h2 class="mt-5 text-center">Q&A 게시판 관리</h2>
 
		<div class="card mb-4 overflow-y-scroll w-75 mx-auto" style="border: 1px solid #ccc">

			<div class="card-body">
                <form action="" method="post">
                    <table class="table">

                        <colgroup>
                            <col width="10%"/> <!--번호-->
                            <col width="45%"/> <!--제목-->
                            <col width="25%"/> <!--작성자-->
                            <col width="15%"/> <!--작성일-->
                            <col width="5%"/> <!--체크박스-->
                        </colgroup>
                        <thead>
                            <tr>
                                <th scope="col">글 번호</th>
                                <th scope="col">제목</th>
                                <th scope="col">작성자</th>
                                <th scope="col">작성일</th>

                                <input type = button id = updateBtn class="btn btn-primary text-black bg-white float-end" value="수정" style="border: 1px solid #444444d8;"></input>

                                <input type = button id = deleteBtn onclick="deleteCheck()" class="btn btn-primary text-black bg-white float-end" value="삭제" style="border: 1px solid #444444d8;"></input>
                            </tr>
                        </thead>
                        <tbody>
                            <tr th:each="post : ${qnaPostList}">
                                <td class="qnaInfo" th:text="${post.id}"></td>
                                <td th:text="${post.title}"></td>
                                <td th:text="${post.writer}"></td>
                                <td th:text="${post.date}"></td>
                                <td><input type="checkbox" id = "checkBox" name = "checkBox"></td>
                            </tr>
                        </tbody>
                        
<!--                         <tr th:each="user, rowStat : ${response.list}">
                                <td th:text="${rowStat.index + 1}"></td> 번호
                                <td th:text="${user.gender}"></td>
                                <td th:text="${user.name}"></td>
                                <td th:text="${user.loginId}"></td>
                                <td th:text="${user.nickname}"></td>
                                <td th:text="${user.address}"></td>
                                <td th:text="${user.tel}"></td>
                            </tr>   
 -->                    </table>
                </form>
			</div>
		</div>




	</div>

    </div>

<!--푸터-->
<footer class="bg-white mt-auto py-3 text-light-emphasis border-top">
    <div class="container-fluid row">
        <div class="d-flex">
            <div class="d-flex col-2 align-items-center justify-content-center">
                <img src="/static/img/concert_logo_black.png" th:src="@{/img/concert_logo_black.png}" class="img-fluid footer-logo-img" alt="">
            </div>
            <div class="d-flex col-3 align-items-center justify-content-center footer-content small">
                <div class="align-items-center">
                    <div class="d-flex">
                        <div class="">핫앤퍼니(주) | 대표이사 :</div>
                        <div>현재훈,신현욱,신민기,고일봉,손준영,임승범</div>
                    </div>
                    <div class="d-flex">
                        <div>주소 :</div>
                        <div class="ms-1">서울시 마포구 신촌로 176 601호</div>
                    </div>
                    <div class="d-flex">
                        <div>대표전화 :</div>
                        <div class="ms-1">010-0000-0000</div>
                    </div>
                    <div class="d-flex">
                        <div>사업자 등록번호 :</div>
                        <div class="ms-1">120-00-00700</div>
                    </div>
                </div>
            </div>
            <div class="d-flex col-2 align-items-center justify-content-center footer-content">
                <div class="small">
                    <div class="fs-5 fw-semibold">고객센터</div>
                    <div>1577-112-119</div>
                    <div>서울시 마포구 신촌로 176 601호</div>
                    <div class="d-flex">
                        <div>이메일:</div>
                        <div class="ms-1">example@example.com</div>
                    </div>
                </div>
            </div>
            <div class="d-flex col-2 align-items-center justify-content-center footer-content small">
                <div>
                    <div>이용약관</div>
                    <div>개인정보처리방침</div>
                    <div>홈페이지 이용약관</div>
                    <div>회사소개</div>
                </div>
            </div>
            <div class="col-2 d-flex justify-content-end fw-semibold">
                <ul class="navbar-nav flex-row align-items-center">
                    <li class="nav-item pe-2">
                        <a href="/about.html" th:href="@{/about.html}" class="nav-link pb-1 pt-0">ABOUT</a>
                    </li>
                    <li class="nav-item pe-2">
                        <a href="/ticket" th:href="@{/ticket}" class="nav-link pb-1 pt-0">TICKET</a>
                    </li>
                    <li class="nav-item pe-2">
                        <a href="/notice" th:href="@{/notice}" class="nav-link pb-1 pt-0">NOTICE</a>
                    </li>
                    <li class="nav-item pe-2">
                        <a href="/qna" th:href="@{/qna}" class="nav-link pb-1 pt-0">QNA</a>
                    </li>
                    <li class="nav-item">
                        <a href="/event" th:href="@{/event}" class="nav-link pb-1 pt-0">EVENT</a>
                    </li>
                </ul>
            </div>
            <div class="col-1 d-flex align-items-center justify-content-end fs-2 footer-icon pb-2">
                <a href="https://github.com/teamJoongang/Hot-And-Funny" th:href="@{https://github.com/teamJoongang/Hot-And-Funny}" class="text-secondary pe-3"><i class="bi bi-github"></i></a>
                <a href="https://hyunsense.notion.site/hyunsense/fd8584dc0730455aa340d328dba8beb6" th:href="@{https://hyunsense.notion.site/hyunsense/fd8584dc0730455aa340d328dba8beb6}" class=""><img class="notion" src="/static/img/notion_icon2.png" th:src="@{/img/notion_icon2.png}" alt=""></a>
            </div>
        </div>
    </div>
</footer>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js" th:src="@{https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js}" integrity="sha384-HwwvtgBNo3bZJJLYd8oVXjrBZt8cqVSpeBNS5n7C8IVInixGAoxmnlMuBnhbgrkm" crossorigin="anonymous"></script>
<!--푸터 끝-->
















<!-- onclick="checked()" id = deleteBtn -->


<script>


    function deleteCheck() {
        // 체크된 항목을 모두 찾습니다.
        var checkboxes = document.querySelectorAll('input[type="checkbox"]:checked');
        // 삭제할 항목이 없으면 경고창을 띄우고 함수를 종료합니다.
        if (checkboxes.length === 0) {
            alert("선택된 항목이 없습니다.");
            return;
        }
            console.log(checkboxes);
        

            
            function deleteCheck() {
                // 체크한 데이터를 담을 배열 선언
                const arr = [];
                // Name이 checkBox인 체크박스를 모두 가져옵니다.
                const checkboxes = document.getElementsByName("checkBox");
                // 취득한 체크박스를 루프합니다.
                checkboxes.forEach(function (checkbox) {
                    // 체크된 체크박스인 경우
                    if (checkbox.checked) {
                        // 체크된 체크박스의 값을 배열에 추가합니다.
                        arr.push(checkbox.value);
                    }
                });
                console.log(arr);

                // 이후에 서버로 값을 전송하거나 다른 작업을 수행할 수 있습니다.
            }
            
            
            
            
          // 삭제할 항목의 ID를 배열에 저장합니다.
/*        var qnaIds = [];
        checkboxes.forEach(function (checkbox) {
        	let qnaInfoElement = checkbox.closest('tr').querySelector('.qnaInfo');
        	let qnaId = qnaInfoElement.textContent;
			qnaIds.push(qnaId);            
        });
        
        var requestData = JSON.stringify(qnaIds);  
        console.log(requestData);
        // AJAX 요청을 보냅니다.
        $.ajax({
            type: 'POST',
            url: 'boardcontrol/delete', // 컨트롤러의 엔드포인트 URL
            data: requestData, // 삭제할 게시물 ID 목록을 JSON 형식으로 전달
            contentType: 'application/json', // 전송 데이터의 형식을 JSON으로 지정
            success: function(response) {
                // 삭제 성공 시 화면에서 삭제한 항목을 제거합니다.
                checkboxes.forEach(function(checkbox) {
                    checkbox.closest('tr').remove();
                });
                alert(response); // 서버에서 반환한 메시지를 표시
            },
            error: function(error) {
                alert("게시물 삭제 중 오류가 발생했습니다.");
            }
        });  */
        

        // 서버로 삭제 요청을 보냅니다.
        // 여기서는 AJAX를 사용하지만, 실제로는 서버와의 통신 방식에 맞게 수정해야 합니다.
        // 서버로 삭제 요청을 보낼 때 qnaIds 배열을 함께 보냅니다.
        // 삭제 요청이 성공하면 해당 항목을 화면에서도 제거합니다.
        // 예: checkboxes.forEach(function (checkbox) { checkbox.closest('tr').remove(); });
    }
            

</script>


<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</body>
</html>